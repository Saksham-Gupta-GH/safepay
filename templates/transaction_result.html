{% extends 'base.html' %}
{% block title %}Result • SafePay{% endblock %}
{% block head %}
<style>
    @keyframes checkmark {
        0% {
            stroke-dashoffset: 100;
        }
        100% {
            stroke-dashoffset: 0;
        }
    }
    
    @keyframes scaleIn {
        0% {
            transform: scale(0);
            opacity: 0;
        }
        50% {
            transform: scale(1.1);
        }
        100% {
            transform: scale(1);
            opacity: 1;
        }
    }
    
    .success-icon {
        width: 80px;
        height: 80px;
        margin: 0 auto 24px;
        display: block;
        animation: scaleIn 0.5s ease-out;
    }
    
    .success-icon circle {
        fill: none;
        stroke: var(--success);
        stroke-width: 3;
        stroke-dasharray: 100;
        stroke-dashoffset: 100;
        animation: checkmark 0.6s ease-out 0.2s forwards;
    }
    
    .success-icon path {
        fill: none;
        stroke: var(--success);
        stroke-width: 3;
        stroke-linecap: round;
        stroke-linejoin: round;
        stroke-dasharray: 50;
        stroke-dashoffset: 50;
        animation: checkmark 0.4s ease-out 0.5s forwards;
    }
    
    .result-card {
        animation: fadeIn 0.6s ease-out;
    }
    
    .detail-row {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 16px 0;
        border-bottom: 1px solid var(--gray-200);
    }
    
    .detail-row:last-child {
        border-bottom: none;
    }
    
    .detail-label {
        color: var(--gray-600);
        font-size: 14px;
        font-weight: 500;
    }
    
    .detail-value {
        font-weight: 600;
        color: var(--gray-900);
        font-size: 15px;
    }
    
    .amount-highlight {
        font-size: 28px;
        font-weight: 700;
        color: var(--primary);
    }
</style>
{% endblock %}
{% block content %}
    <div class="fade-in" style="max-width: 600px; margin: 0 auto;">
        <div class="card result-card">
            <!-- Success Icon -->
            <svg class="success-icon" viewBox="0 0 52 52">
                <circle cx="26" cy="26" r="25"/>
                <path d="M14 27l7.5 7.5L38 18"/>
            </svg>
            
            <!-- Success Message -->
            <div style="text-align: center; margin-bottom: 32px;">
                <h2 style="font-size: 28px; color: var(--gray-900); margin-bottom: 8px;">Transaction Successful!</h2>
                <p style="color: var(--gray-500); font-size: 15px;">Your payment has been processed securely</p>
            </div>

            <!-- Security Status -->
            <div style="background: var(--gray-50); border-radius: var(--radius-sm); padding: 20px; margin-bottom: 24px;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
                    <div style="display: flex; align-items: center; gap: 8px;">
                        <svg style="width: 20px; height: 20px; color: var(--gray-600);" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
                        </svg>
                        <span class="detail-label">Fraud Detection</span>
                    </div>
                    <div>
                        {% if fraud_status == 'Legit' %}
                            <span class="badge success">
                                <svg style="width: 12px; height: 12px; display: inline-block; vertical-align: middle; margin-right: 4px;" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                    <polyline points="20 6 9 17 4 12"></polyline>
                                </svg>
                                Legit
                            </span>
                        {% else %}
                            <span class="badge danger">
                                <svg style="width: 12px; height: 12px; display: inline-block; vertical-align: middle; margin-right: 4px;" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                    <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path>
                                </svg>
                                Fraudulent
                            </span>
                        {% endif %}
                    </div>
                </div>
                
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <div style="display: flex; align-items: center; gap: 8px;">
                        <svg style="width: 20px; height: 20px; color: var(--gray-600);" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                            <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                        </svg>
                        <span class="detail-label">Digital Signature</span>
                    </div>
                    <div>
                        {% if verified %}
                            <span class="badge success">
                                <svg style="width: 12px; height: 12px; display: inline-block; vertical-align: middle; margin-right: 4px;" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                    <polyline points="20 6 9 17 4 12"></polyline>
                                </svg>
                                Verified
                            </span>
                        {% else %}
                            <span class="badge danger">
                                <svg style="width: 12px; height: 12px; display: inline-block; vertical-align: middle; margin-right: 4px;" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                    <line x1="18" y1="6" x2="6" y2="18"></line>
                                    <line x1="6" y1="6" x2="18" y2="18"></line>
                                </svg>
                                Failed
                            </span>
                        {% endif %}
                    </div>
                </div>
            </div>

            <!-- Transaction Details -->
            <div style="margin-bottom: 24px;">
                <div class="detail-row">
                    <span class="detail-label">Amount Transferred</span>
                    <span class="amount-highlight">₹{{ '%.2f' % amount }}</span>
                </div>
                
                <div class="detail-row">
                    <span class="detail-label">
                        <svg style="width: 16px; height: 16px; display: inline-block; vertical-align: middle; margin-right: 4px;" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                            <circle cx="12" cy="7" r="4"></circle>
                        </svg>
                        Receiver
                    </span>
                    <span class="detail-value">{{ receiver }}</span>
                </div>
                
                <div class="detail-row">
                    <span class="detail-label">
                        <svg style="width: 16px; height: 16px; display: inline-block; vertical-align: middle; margin-right: 4px;" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="1" y="4" width="22" height="16" rx="2" ry="2"></rect>
                            <line x1="1" y1="10" x2="23" y2="10"></line>
                        </svg>
                        New Balance
                    </span>
                    <span class="detail-value" style="color: var(--primary);">₹{{ '%.2f' % new_balance }}</span>
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="btn-group">
                <a href="{{ url_for('transaction') }}" class="btn">
                    <svg style="width: 18px; height: 18px; display: inline-block; vertical-align: middle; margin-right: 8px;" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="12" y1="5" x2="12" y2="19"></line>
                        <line x1="5" y1="12" x2="19" y2="12"></line>
                    </svg>
                    New Transaction
                </a>
                <a href="{{ url_for('dashboard') }}" class="btn btn-secondary">
                    <svg style="width: 18px; height: 18px; display: inline-block; vertical-align: middle; margin-right: 8px;" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                    </svg>
                    Back to Dashboard
                </a>
            </div>

            <!-- Security Note -->
            <div style="margin-top: 24px; padding-top: 24px; border-top: 1px solid var(--gray-200); text-align: center;">
                <p style="color: var(--gray-500); font-size: 13px; display: flex; align-items: center; justify-content: center; gap: 6px;">
                    <svg style="width: 14px; height: 14px;" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                        <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                    </svg>
                    All transaction details are encrypted and stored securely
                </p>
            </div>
        </div>
    </div>
{% endblock %}
